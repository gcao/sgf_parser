#!/usr/bin/env ruby

if ARGV.size == 0
  puts <<-USAGE
Usage: 
  sgf <DIRECTORY_OR_FILE>
  USAGE
  exit 1
end

sgf_rb = File.expand_path(File.dirname(__FILE__) + '/../lib/sgf.rb')
if File.exists?(sgf_rb)
  require sgf_rb
else
  require 'rubygems'
  require 'sgf'
end

require 'pp'

filename = ARGV[0]
debug    = ENV["DEBUG"] == "true"

if File.directory?(filename)
  Dir["#{filename}/**/*.sgf", "#{filename}/**/*.SGF"].each do |file|
    puts "*********************"
    puts file
    puts
    game = SGF::Parser.parse_file(file, debug)
    pp game.to_hash
  end
else
  puts "*********************"
  puts filename
  puts
  game = SGF::Parser.parse_file(filename, debug)
  pp game.to_hash
end
